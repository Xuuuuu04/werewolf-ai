# 🔧 调试模式使用指南

## 📋 功能概述

调试模式允许你控制是否显示AI模型的内部信息，包括：
- 🔍 API请求和响应详情
- 🎲 随机决策过程
- 📊 详细的游戏状态
- ⚠️ 错误和警告信息

**默认设置：隐藏调试信息**（推荐普通用户使用）

## 🎮 使用方法

### 方式1：启动器交互配置（推荐）

```bash
python start_game.py
```

启动后会看到：

```
🔧 调试模式配置
是否显示API响应等调试信息？
  0. ❌ 隐藏调试信息（推荐）
  1. ✅ 显示调试信息

➤ 请选择 (0-1):
```

**选择说明：**
- **0** - 隐藏调试信息，界面清爽（推荐）
- **1** - 显示调试信息，包含详细的技术信息

### 方式2：命令行参数

#### 显示调试信息
```bash
python run_battle.py \
    --config configs/qwen_vs_qwen.yaml \
    --debug \
    --log_save_path ./logs/debug_game
```

#### 隐藏调试信息（默认）
```bash
python run_battle.py \
    --config configs/qwen_vs_qwen.yaml \
    --no-debug \
    --log_save_path ./logs/clean_game
```

## 🔍 调试信息内容

### 显示时看到的内容：
```
🔍 API响应类型: <class 'openai.types.chat.chat_completion.ChatCompletion'>
🔍 API响应内容: ChatCompletion(id='chatcmpl-xxx', choices=[...], ...)
🎲 随机选择有效动作: {'投票': '2'} | 可选动作: [...]
```

### 隐藏时看到的界面：
```
══════════════════════════════════════════════════════════════════════
                            💬 发言阶段
══════════════════════════════════════════════════════════════════════

──────────────────────────────────────────────────────────────────────
│ 🎭 玩家编号: #5
│ ℹ️ 你的身份: 🐺 狼人
│ ✨ 当前阶段: 💬 发言阶段
──────────────────────────────────────────────────────────────────────

📜 游戏日志
──────────────────────────────────────────────────────────────────────
🔮 3号预言家: 1号是我的金水
🧪 4号女巫: 我使用了毒药
...

➤ 请输入你的发言内容：_
```

## 📊 对比效果

### 隐藏调试信息（推荐）
- ✅ 界面清爽，专注游戏
- ✅ 减少视觉干扰
- ✅ 更适合普通玩家
- ✅ 提升游戏体验

### 显示调试信息
- 🔧 适合开发者调试
- 🔧 可以查看AI决策细节
- 🔧 有助于理解游戏逻辑
- ⚠️ 界面相对复杂

## ⚙️ 配置文件修改

调试模式会自动修改配置文件中的 `debug` 设置：

```yaml
# 修改前
model_params:
    debug: false  # 隐藏调试信息

# 修改后（如果选择显示）
model_params:
    debug: true   # 显示调试信息
```

## 🎯 推荐使用场景

### 普通玩家
- ✅ 使用启动器，选择"隐藏调试信息"
- ✅ 或使用 `--no-debug` 参数
- ✅ 享受清爽的游戏界面

### 开发者/测试者
- 🔧 使用启动器，选择"显示调试信息"
- 🔧 或使用 `--debug` 参数
- 🔧 查看AI的完整决策过程

### 问题排查
- 🔧 启用调试模式查看详细错误信息
- 🔧 检查API调用是否正常
- 🔧 分析AI的决策逻辑

## 💡 使用技巧

1. **首次使用**：建议隐藏调试信息，专注游戏体验
2. **学习AI策略**：可以临时开启调试模式，观察AI的思考过程
3. **问题排查**：遇到异常时开启调试模式，查看详细错误信息
4. **性能测试**：关闭调试信息获得更好的性能

## ⚠️ 注意事项

1. **默认隐藏**：新用户无需手动配置，自动隐藏调试信息
2. **临时修改**：调试设置只影响当前游戏会话
3. **开发友好**：开发者可以通过 `--debug` 快速启用调试
4. **向下兼容**：所有现有配置文件都会自动添加 `debug: false`

## 🆚 模式对比表

| 特性 | 隐藏调试信息 | 显示调试信息 |
|------|-------------|-------------|
| 界面清爽度 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| 适合人群 | 所有用户 | 开发者/测试者 |
| 学习价值 | 中等 | 高 |
| 视觉干扰 | 低 | 中等 |
| 推荐指数 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |

## 📝 快速开始

**最简单的使用方式：**

```bash
python start_game.py
# 选择游戏模式后，选择 "0" 隐藏调试信息
# 开始享受清爽的游戏体验！
```

**如果需要调试：**

```bash
python start_game.py
# 选择游戏模式后，选择 "1" 显示调试信息
# 查看AI的完整决策过程
```

---

**享受游戏！** 🎮

现在你可以根据需要选择是否显示调试信息，获得最佳的游戏体验！

